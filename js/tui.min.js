const MAIN_CONTAINER=document.getElementById("main-container"),SECTION_CONTAINER=document.getElementById("section-container"),LEFT_SECTION=document.getElementById("left-section"),RIGHT_SECTION=document.getElementById("right-section"),HOME_SECTION=document.getElementById("home"),SKILLS_SECTION=document.getElementById("skills"),EXPERIENCE_SECTION=document.getElementById("experience"),PROJECTS_SECTION=document.getElementById("projects"),FOOTER_SECTION=document.getElementById("footer"),MAIN_CONTENT_SECTION=document.getElementById("main-content")?.getElementsByClassName("container-content")[0],COLORS=["text-blue","text-orange","text-pink"],left_sections=[{name:"home",section:HOME_SECTION,items:[]},{name:"experience",section:EXPERIENCE_SECTION,items:[...EXPERIENCE_SECTION.firstElementChild.children[2].children]},{name:"projects",section:PROJECTS_SECTION,items:[...PROJECTS_SECTION.firstElementChild.children[2].children]},{name:"skills",section:SKILLS_SECTION,items:[...SKILLS_SECTION.firstElementChild.children[2].children]}],currentPosition={sectionIndex:0,sectionItemIndex:0},previousPosition={sectionIndex:0,sectionItemIndex:0};function clamp(a,b,c){return Math.min(Math.max(a,b),c)}function isMobile(){return window.innerWidth<=768}function getRandomTextColorClass(){return COLORS[Math.floor(Math.random()*COLORS.length)]}function colorizeString(a){return a.replaceAll("{{",()=>`<span class="${getRandomTextColorClass()}">`).replaceAll("}}","</span>")}function colorizeCode(){const a=document.getElementsByTagName("code")[0];if(!a)return;const b=a.innerText,c=a.classList[0],d={js:javascriptKeywords,ts:typescriptKeywords,sql:sqlKeywords,mjs:nodeKeywords,html:htmlKeywords,css:cssKeywords,go:goKeywords,c:cKeywords,graphql:graphqlKeywords,sql:sqlKeywords,tsx:reactKeywords,test:testKeywords,sh:bashKeywords,yml:yamlKeywords,ino:arduinoKeywords}[c];if(!d)return;let e=b;d.forEach((a,b)=>{if(a.length){const c=new RegExp(`\\b(${a.join("|")})\\b`,"g");e=e.replaceAll(c,t=>`<span class="${COLORS[b]}">${t}</span>`)}}),a.innerHTML=e}async function getCodeSnippet(a){const b=await fetch(`../data/snippets/snippet.${a}`);return await b.text()}function isVisibleInScrollView(a,b){const c=a.offsetTop,d=c+a.clientHeight,e=b.scrollTop,f=e+b.clientHeight;return c>=e&&d<=f}function onHamburgerMenuPress(){const a=document.getElementsByName("hamburger-toggle")[0],b=document.getElementsByClassName("nav-container")[0];a.checked?(LEFT_SECTION.classList.add("menu-open"),b.style.opacity=1):(LEFT_SECTION.classList.remove("menu-open"),b.style.opacity=.9)}function closeHamburgerMenu(){document.getElementsByName("hamburger-toggle")[0].checked=!1,LEFT_SECTION.classList.remove("menu-open")}function clearMainContent(){MAIN_CONTENT_SECTION.innerHTML="",MAIN_CONTENT_SECTION.scrollTo({top:0})}async function displayContent(){clearMainContent();const a=left_sections[currentPosition.sectionIndex].name,b=await fetch(`data/${a}.json`),{data:c}=await b.json(),d=document.createElement("div");d.classList.add("outer-paragraph-container");const e=document.createElement("div");e.classList.add("inner-paragraph-container");if("home"!==a){e.classList.add("mt-4");const b=c[currentPosition.sectionItemIndex],f=document.createElement("div"),g=document.createElement("h1");g.innerHTML=b?.title?`<span class="${getRandomTextColorClass()}">${b.title}</span>`:null;const h=document.createElement("h2");h.innerHTML=b?.date?`<span class="${getRandomTextColorClass()}">${b.date}</span>`:null;const i=document.createElement("h2");i.innerHTML=b?.year?`[Built in <span class="${getRandomTextColorClass()}">${b.year}</span>]`:null;const j=document.createElement("div");j.classList.add("technologies-row"),j.innerHTML=b.technologies?.map(a=>colorizeString(a)).join(" ")||null;const k=document.createElement("a");k.classList.add("project-button"),k.href=b?.githubUrl,k.target="_blank",k.innerText="Github";const l=document.createElement("a");l.classList.add("project-button"),l.href=b?.demoUrl,l.target="_blank",l.innerText="Demo";const m=document.createElement("div");m.classList.add("buttons-container"),b?.githubUrl&&m.appendChild(k),b?.demoUrl&&m.appendChild(l),g.innerHTML&&f.appendChild(g),h.innerHTML&&f.appendChild(h),i.innerHTML&&f.appendChild(i),j.innerHTML&&f.appendChild(j),0<m.children.length&&f.appendChild(m);const n=b.images?.map(a=>{const b=document.createElement("div");b.style.minHeight="200px",b.classList.add("image-inner-container");const c=document.createElement("img");return c.loading="lazy",c.alt="Project image",c.decoding="async",c.src=`../images/${a}`,c.classList.add("project-image"),b.appendChild(c),b})??[];b.content.forEach((a,b)=>{const c=document.createElement("div");c.innerHTML=colorizeString(a).replaceAll("\n","<br>"),e.appendChild(c),b<n.length&&(c.appendChild(n[b]),e.appendChild(c))}),b?.snippet&&(async()=>{const a=document.createElement("div");a.classList.add("snippet-container");const b=document.createElement("pre"),c=document.createElement("code");c.classList.add(b.snippet),b.appendChild(c),c.innerText=await getCodeSnippet(b.snippet),a.appendChild(b),e.appendChild(a)})();e.prepend(f),d.appendChild(e),clearMainContent(),MAIN_CONTENT_SECTION.appendChild(d),colorizeCode()}else{const a=`images/logo${Math.floor(4*Math.random())+1}.svg`,b=document.createElement("div");b.id="logo-container";const c=document.createElement("img");c.loading="eager",c.src=a,c.id="logo",c.alt="Wallenart",b.appendChild(c),MAIN_CONTENT_SECTION.appendChild(b),c.forEach(a=>{const b=document.createElement("div");a.content.forEach(a=>{const c=document.createElement("p");c.innerHTML=colorizeString(a),b.appendChild(c)}),e.appendChild(b)}),d.appendChild(e),MAIN_CONTENT_SECTION.appendChild(d)}}function clearSelectionStyling(a){if(isMobile()){const b=document.getElementsByClassName("selected-item")[0],c=document.getElementsByClassName("selected-frame")[0];b&&b.classList.remove("selected-item"),c&&c.classList.remove("selected-frame")}const b=left_sections[previousPosition.sectionIndex],c=b.items[previousPosition.sectionItemIndex],d=b.section.getElementsByClassName("list-index")[0]?.firstElementChild,e=b.section.getElementsByClassName("ui-list")[0];b.section.classList.remove("selected-frame"),c?.classList.remove("selected-item"),d&&(d.innerText=`1 of ${b.items.length}`),e&&a&&e.scrollTo({top:0})}async function render(a=!1,b=!1){if(!isMobile()&&!b&&currentPosition.sectionIndex===previousPosition.sectionIndex&&currentPosition.sectionItemIndex===previousPosition.sectionItemIndex)return;const c=left_sections[currentPosition.sectionIndex],d=c.items?.[currentPosition.sectionItemIndex],e=c.section.getElementsByClassName("list-index")[0]?.firstElementChild,f=c.section.getElementsByClassName("ui-list")[0];clearSelectionStyling(a),c.section.classList.add("selected-frame"),d?.classList.add("selected-item"),e&&(e.innerText=`${currentPosition.sectionItemIndex+1} of ${c.items.length}`),f&&d&&!isVisibleInScrollView(d,f)&&previousPosition.sectionItemIndex!==currentPosition.sectionItemIndex&&(f.scrollBy({top:previousPosition.sectionItemIndex<currentPosition.sectionItemIndex?d.clientHeight: -d.clientHeight,behavior:"instant"})),b||displayContent(),isMobile()&&closeHamburgerMenu()}function savePreviousPosition(){previousPosition.sectionIndex=currentPosition.sectionIndex,previousPosition.sectionItemIndex=currentPosition.sectionItemIndex}function goToSection(a,b=0){savePreviousPosition(),currentPosition.sectionIndex=clamp(0,a,left_sections.length-1),currentPosition.sectionItemIndex=clamp(0,b,left_sections[currentPosition.sectionIndex].items.length-1)}function goToNextSection(){savePreviousPosition(),currentPosition.sectionIndex=clamp(0,currentPosition.sectionIndex+1,left_sections.length-1),currentPosition.sectionItemIndex=0}function goToPreviousSection(){savePreviousPosition(),currentPosition.sectionIndex=clamp(0,currentPosition.sectionIndex-1,left_sections.length-1),currentPosition.sectionItemIndex=0}function goToNextItem(){savePreviousPosition(),currentPosition.sectionItemIndex=clamp(0,currentPosition.sectionItemIndex+1,left_sections[currentPosition.sectionIndex].items.length-1)}function goToPreviousItem(){savePreviousPosition(),currentPosition.sectionItemIndex=clamp(0,currentPosition.sectionItemIndex-1,left_sections[currentPosition.sectionIndex].items.length-1)}function scrollMainContentDown(){MAIN_CONTENT_SECTION?.scrollBy({top:MAIN_CONTENT_SECTION.clientHeight/2})}function scrollMainContentUp(){MAIN_CONTENT_SECTION?.scrollBy({top:-MAIN_CONTENT_SECTION.clientHeight/2})}function initKeyboardListeners(){addEventListener("keydown",async a=>{let b=!1;const{key:c,code:d,ctrlKey:e}=a;(c.includes("Arrow")||c.includes("Page"))&&a.preventDefault(),"PageDown"===c||e&&"d"===c?scrollMainContentDown():"PageUp"===c||e&&"u"===c?scrollMainContentUp():"ArrowUp"===c||"k"===c?0!==currentPosition.sectionIndex&&goToPreviousItem():"ArrowDown"===c||"j"===c?0!==currentPosition.sectionIndex&&goToNextItem():"ArrowLeft"===c||"h"===c?(goToPreviousSection(),b=!0):"ArrowRight"===c||"l"===c?(goToNextSection(),b=!0):d.includes("Digit")&&(goToSection(parseInt(c)-1),b=!0),await render(b)})}function initMouseListeners(){left_sections.forEach((a,b)=>{a.items.forEach((c,d)=>{c.addEventListener("click",async e=>{e.stopPropagation(),goToSection(b,d),await render(b!==previousPosition.sectionIndex)})}),a.section.addEventListener("click",async()=>{goToSection(b),await render(b!==previousPosition.sectionIndex)})})}function initTouchListeners(){isMobile()&&document.getElementsByName("hamburger-toggle")[0].addEventListener("click",()=>{onHamburgerMenuPress()})}async function init(){initKeyboardListeners(),initMouseListeners(),initTouchListeners(),await render(!0,!0)}
